<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>定时/延时调用</title>
    <script>
        /*
         *  一、延时调用:
         *      (1).作用: 开启延时后,当调用一个函数时,函数不会立即执行，而是隔一段时间以后再执行，且只执行一次.
         *      (2).语法:
         *              setTimeout(fun, time);
         *      (3).参数:
         *              fun,  开始延时的函数
         * 	            time, 延时的时间(单位毫秒).
         *      (4).返回值:返回一个Number类型的数据,这个数字用来作为延时器的唯一标识.
         *      (5).关闭延时调用:clearTimeout(Number);
         *
         *  二、定时调用:
         *      (1).作用:开启定时后,函数会每间隔一段时间执行一次,会重复执行.
         *      (2).语法:
         *              setInterval(fun,time);
         *      (3).参数:
         *              fun,  开始延时的函数
         *              time, 延时的时间(单位毫秒).
         *      (4).返回值:返回一个Number类型的数据,这个数字用来作为定时器的唯一标识.
         *      (5).关闭定时器:clearInterval(Number);
         *
         *  总结:
         *      (1).延时调用和定时调用的区别:
         *          延时调用只会执行一次.
         *          定时调用会执行多次
         *
         * 延时调用和定时调用实际上是可以互相代替的，在开发中可以根据自己需要去选择
         */
        window.onload = function () {
            //案例1:实现倒计时:

            //获取开始倒计时按钮
            var startTime = document.getElementById("startTime");
            //获取结束倒计时按钮
            var endTime = document.getElementById("endTime");
            //获取倒计时数字标签
            var count = document.getElementById("count");
            //获取倒计时数字标签内数字
            var number = count.innerText;
            //定时调用id
            var timer,m;
            //监听倒计时开始按钮
            startTime.addEventListener('click', function (event) {
                timer = setInterval(function () {
                    //标签内数字自减
                    count.innerHTML = number--;
                    //判断,当倒计时数字等于零时
                    if (number === 0) {
                        //关闭定时调用.
                        clearInterval(timer);
                    }
                }, 1000);
            }, false)
            //监听倒计时结束按钮
            endTime.addEventListener('click', function (event) {
                clearInterval(timer);
            }, false)


            //案例1:实现轮播:
            //获取图片
            var banner = document.getElementById("banner");
            //获取开始结束按钮
            var start = document.getElementById("btn01");
            var end = document.getElementById("btn02");
            //创建一个数组,存储图片
            var imgArr = ["img/1.jpg", "img/2.jpg", "img/3.jpg", "img/4.jpg", "img/5.jpg"];
            //声明一个变量,储存图片的索引
            var index = 0;

            //监听开始按钮
            start.addEventListener('click', function () {
                //开启定时调用
                 m = setInterval(function () {
                    //索引自增
                    index++;
                    index %= imgArr.length;
                    //修改图片路径
                    banner.src = imgArr[index];
                }, 3000)
            }, false)

            //监听结束按钮
            end.addEventListener('click', function () {
                //关闭定时调用
                clearInterval(m);
            }, false)
        };
    </script>
</head>
<body>
<h1 id="count">60</h1>
<button id="startTime">开始倒计时</button>
<button id="endTime">结束倒计时</button>


<img style="display: block;" id="banner" src="img/1.jpg"/>
<button id="btn01">开始</button>
<button id="btn02">停止</button>
</body>
</html>
