<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>JSON</title>
		<script>
			/** --- JSON(全拼:"JavaScript Object Notation") ---
			 	在计算机语言中,每一门语言只能识别自己的语言,其他的语言都不认识.
			 		比如:JS中的对象只有JS自己认识，给开发造成极大阻碍.所以,我们希望可以将一个对象在不同的语言中进行传递，
			 			已达到通信的目的，最佳方式就是将一个对象转换为字符串的形式.

			 	(1) JSON实际上就是一个特殊格式的字符串，它的语法格式和JS对象的语法基本上是一致,这个字符串可以被任意的语言所识别，
			  		 并且可以转换为任意语言中的对象，JSON在开发中主要用来数据的交互

                (2) JSON的语法和JS对象的语法基本一样，不同点在于，
                        JSON中属性名必须加引号，而且必须是双引号.
                        JSON中的字符串也必须使用双引号,最后一个属性后边不能再有逗号.

                (3) JSON分类：
                   		1.对象 {}
			 				var obj = '{"name":"孙悟空","age":18,"gender":"男"}';
			 			2.数组 []
							var obj = '{"arr":[1,2,3]}';

				(4)JSON中允许的值：
						1.字符串
						2.数值
						3.布尔值
						4.null
						5.对象
						6.数组
							var arr = '[1,2,3,"hello",true]';
							var arr = '[{"name":"孙悟空","age":18,"gender":"男"}]';

				(5)JSON与JavaScript的转换
			 		在JS中，为我们提供了一个工具类，就叫JSON
			 			这个对象可以帮助我们将一个JSON转换为JS对象，也可以将一个JS对象转换为JSON

			 		1.JSON --转换--> JS对象;
			 			JSON.parse();
						 	- 可以将以JSON字符串转换为JS对象.
						 	- 需要一个JSON字符串作为参数，会将该字符串转换为JS对象并返回.
			 		2.JS对象 --转换--> JSON;
						JSON.stringify()
							- 可以将一个JS对象转换为JSON字符串.
							- 需要一个JS对象作为参数，会返回一个JSON字符串.

                (6)利用JSON进行深复制
			 */

			//创建JSON字符串
			var json1 = '{"name":"孙悟空","age":18,"gender":"男","arr":[1,2,3]}';
			console.log(typeof json1);	//  string

			//创建JS对象
			var obj1 = {
				name: "猪八戒",
				age: 28,
				gender: "男"
			};

			//JSON --转换--> JS对象;
			var o1 = JSON.parse(json1);
			console.log(typeof o1); // object
			console.log(o1.gender); // 返回,男

			//JS对象 --转换--> JSON;
			var str1 = JSON.stringify(obj1);
			console.log(str1); //返回,{"name":"猪八戒","age":28,"gender":"男"}


            // 可以通过JSON来完成对象的深复制
            var arr = [{name:'孙悟空'},{name:'猪八戒'}];

			// var arr1 = arr.slice();      // 浅复制
            // arr[0].name = '哈哈';         // 修改arr
            // console.log(arr1[0].name);   // 哈哈

			var arr2 = JSON.parse(JSON.stringify(arr)); // 深复制
			arr[0].name = '哈哈哈';                      // 修改arr
			console.log(arr2[0].name);                  // 孙悟空

			/* JSON这个对象在IE7及以下的浏览器中不支持，所以在这些浏览器中调用时会报错 */

			/* 扩展
			 * eval()
			 * 	- 这个函数可以用来执行一段字符串形式的JS代码，并将执行结果返回
			 * 	- 如果使用eval()执行的字符串中含有{},它会将{}当成是代码块
			 * 		如果不希望将其当成代码块解析，则需要在字符串前后各加一个()
			 *
			 * 	- eval()这个函数的功能很强大，可以直接执行一个字符串中的js代码，
			 * 		但是在开发中尽量不要使用，首先它的执行性能比较差，然后它还具有安全隐患
			 */
		</script>
	</head>
	<body>
	</body>
</html>